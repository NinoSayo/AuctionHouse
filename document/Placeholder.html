$(document).ready(function() {
    displayCart();
    });
    
    const displayCart = () => {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let total = 0;
    
    let cartContainer = $(".checkout");
    let cartItems = $("<div></div>");
    cartItems.html("<h4>Cart <span class='price' style='color:black'><i class='fa fa-shopping-cart'></i> <b>" + cart.length + "</b></span></h4><hr>");
    
    for (let i = 0; i < cart.length; i++) {
    const item = cart[i];
    const itemPrice = parseFloat(item.price.replace('$', ''));
    if (!isNaN(itemPrice)) {
    total += itemPrice * item.quantity;
    }
    let itemElement = $("<p></p>");
    itemElement.html(item.title + "&nbsp" + "x" + item.quantity + "<span class='price'>" + item.price + "</span>");
    
    let decreaseBtn = $("<button class='decrease-item'>-</button>");
    decreaseBtn.click(function() {
    decreaseItem(item.id);
    });
    itemElement.prepend(decreaseBtn);
    
    let increaseBtn = $("<button class='increase-item'>+</button>");
    increaseBtn.click(function() {
    increaseItem(item.id);
    });
    itemElement.prepend(increaseBtn);
    
    let removeBtn = $("<button class='remove-item'>x</button>");
    removeBtn.click(function() {
    removeItem(item.id);
    });
    itemElement.prepend(removeBtn);
    
    cartItems.append(itemElement);
    }
    
    let totalElement = $("<p></p>");
    totalElement.html("Total <span class='price' style='color:black'><b>$" + total + "</b></span>");
    cartItems.append(totalElement);
    
    cartContainer.html("");
    cartContainer.append(cartItems);
    };
    
    const decreaseItem = (id) => {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    
    for (let i = 0; i < cart.length; i++) {
    if (cart[i].id === id) {
    cart[i].quantity--;
    if (cart[i].quantity <= 0) {
    cart.splice(i, 1);
    }
    break;
    }
    }
    
    localStorage.setItem("cart", JSON.stringify(cart));
    displayCart();
    };
    
    const increaseItem = (id) => {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    
    for (let i = 0; i < cart.length; i++) {
    if (cart[i].id === id) {
    cart[i].quantity++;
    break;
    }
    }
    
    localStorage.setItem("cart", JSON.stringify(cart));
    displayCart();
    };
    
    const removeItem = (id) => {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    for (let i = 0; i < cart.length; i++) {
    if (cart[i].id === id) {
    cart.splice(i, 1);
    break;
    }
    }
    
    localStorage.setItem("cart", JSON.stringify(cart));
    displayCart();
    };
    
    const decreaseQuantity = (id) => {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    
    for (let i = 0; i < cart.length; i++) {
    if (cart[i].id === id) {
    cart[i].quantity--;
    if (cart[i].quantity === 0) {
    cart.splice(i, 1);
    break;
    }
    break;
    }
    }
    
    localStorage.setItem("cart", JSON.stringify(cart));
    displayCart();
    };
    
    $(document).ready(function() {
    displayCart();
    
    $(".checkout").on("click", ".remove", function() {
    let id = $(this).data("id");
    removeItem(id);
    });
    
    $(".checkout").on("click", ".decrease", function() {
    let id = $(this).data("id");
    decreaseQuantity(id);
    });
    });
    